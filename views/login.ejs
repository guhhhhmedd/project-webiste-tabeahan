<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Masuk - Tabeahan Cendekia</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --cream: #fff8f8;
      --gold: #c8a020;
      --dark: #7a1010;
      --red-deep: #5a0a0a;
      --muted: #9b6b6b;
    }
    * { box-sizing: border-box; }
    body { font-family: "DM Sans", sans-serif; background: var(--cream); color: var(--dark); min-height: 100vh; display: flex; flex-direction: row; }
    h1, h2 { font-family: "Playfair Display", serif; }
    body::after {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 999;
    }
    .ruled-line { height: 1px; background: linear-gradient(90deg, transparent, var(--gold), transparent); }
    .form-input {
      width: 100%; padding: 0.75rem 1rem; border: 1px solid #ddd6cc; border-radius: 6px;
      background: white; font-family: "DM Sans", sans-serif; font-size: 0.875rem; color: var(--dark);
      transition: all 0.2s ease; outline: none;
    }
    .form-input:focus { border-color: var(--gold); box-shadow: 0 0 0 3px rgba(184,146,74,0.1); }
    .form-input::placeholder { color: #c4b8a8; }
    .btn-primary {
      width: 100%; padding: 0.875rem; background: var(--dark); color: var(--cream); border: none;
      border-radius: 6px; font-family: "DM Sans", sans-serif; font-size: 0.8rem; font-weight: 600;
      letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; transition: all 0.2s ease;
    }
    .btn-primary:hover:not(:disabled) { background: var(--gold); box-shadow: 0 4px 16px -4px rgba(184,146,74,0.4); }
    .btn-primary:disabled { opacity: 0.4; cursor: not-allowed; }
    .left-panel { background: #5a0a0a; position: relative; overflow: hidden; }
    .left-panel::before {
      content: 'CAT'; position: absolute; font-family: "Playfair Display", serif;
      font-size: 16rem; font-weight: 900; color: transparent;
      -webkit-text-stroke: 1px rgba(200,160,32,0.12); bottom: -2rem; left: -2rem; line-height: 1;
    }
    .error-box { background: #fef2f2; border: 1px solid #fecaca; border-left: 3px solid #ef4444; border-radius: 6px; padding: 0.875rem 1rem; font-size: 0.8rem; color: #b91c1c; }
    .rate-box { background: #fff7ed; border: 1px solid #fed7aa; border-left: 3px solid var(--gold); border-radius: 6px; padding: 0.875rem 1rem; font-size: 0.8rem; color: #92400e; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
    .fade-in { animation: fadeInUp 0.5s ease forwards; }

    /* ── Mobile Responsive ── */
    @media (max-width: 1023px) {
      body { flex-direction: column; align-items: stretch; }
    }
    @media (max-width: 640px) {
      .right-panel {
        padding: 2rem 1.25rem !important;
        align-items: flex-start;
      }
      .form-card {
        padding-top: 1.5rem;
      }
      .form-card h1 {
        font-size: 1.75rem !important;
      }
      .mobile-logo {
        margin-bottom: 1.75rem !important;
      }
      .mobile-logo img {
        height: 3rem !important;
      }
    }
    @media (max-width: 375px) {
      .form-card h1 {
        font-size: 1.5rem !important;
      }
      .right-panel {
        padding: 1.5rem 1rem !important;
      }
    }
  </style>
</head>

<body>

  <!-- Left panel -->
  <div class="left-panel hidden lg:flex flex-col justify-between p-12 w-[420px] flex-shrink-0">
    <a href="/" class="flex items-center gap-3">
      <img src="./asset/logo.png" alt="Logo" class="h-9 w-auto">
      <span style="font-family:'Playfair Display',serif; color:var(--cream); font-size:1rem; font-weight:700">
        Tabeahan <span style="color:var(--gold)">Cendekia</span>
      </span>
    </a>
    <div>
      <div style="height:1px; width:3rem; background:var(--gold); margin-bottom:2rem; opacity:0.6"></div>
      <h2 style="font-size:2.5rem; font-weight:900; color:var(--cream); line-height:1.1; font-family:'Playfair Display',serif">
        Ujian<br/>Dimulai<br/><span style="color:var(--gold)">Dari Sini.</span>
      </h2>
      <p class="mt-6 text-sm leading-relaxed" style="color:rgba(255,255,255,0.35); font-weight:300">
        Platform CAT digital untuk persiapan seleksi CPNS, Polri, dan PPPK.
      </p>
      <div class="mt-10 space-y-4">
        <div class="flex items-center gap-4">
          <div style="width:2px; height:32px; background:var(--gold); opacity:0.4"></div>
          <div>
            <p style="font-family:'Playfair Display',serif; color:var(--cream); font-size:1.25rem; font-weight:700; line-height:1">500+</p>
            <p style="color:rgba(255,255,255,0.3); font-size:0.7rem; text-transform:uppercase; letter-spacing:0.15em; font-weight:500">Bank Soal</p>
          </div>
        </div>
        <div class="flex items-center gap-4">
          <div style="width:2px; height:32px; background:var(--gold); opacity:0.4"></div>
          <div>
            <p style="font-family:'Playfair Display',serif; color:var(--cream); font-size:1.25rem; font-weight:700; line-height:1">3 Paket</p>
            <p style="color:rgba(255,255,255,0.3); font-size:0.7rem; text-transform:uppercase; letter-spacing:0.15em; font-weight:500">SKD · Polri · PPPK</p>
          </div>
        </div>
      </div>
    </div>
    <p style="color:rgba(255,255,255,0.15); font-size:0.7rem">&copy; 2026 Tabeahan Cendekia</p>
  </div>

  <!-- Right form panel -->
  <div class="right-panel flex-1 flex items-center justify-center p-6 sm:p-10 md:p-12">
    <div class="form-card w-full max-w-sm fade-in">

      <div class="mobile-logo lg:hidden text-center mb-8">
        <a href="/" class="inline-block">
          <img src="./asset/logo.png" alt="Logo" class="h-14 mx-auto mb-3">
        </a>
        <p style="font-family:'Playfair Display',serif; color:var(--dark); font-size:1.1rem; font-weight:700; line-height:1.3">
          Tabeahan <span style="color:var(--gold)">Cendekia</span>
        </p>
        <p style="font-size:0.7rem; color:var(--muted); margin-top:0.25rem; text-transform:uppercase; letter-spacing:0.15em">Platform CAT Digital</p>
      </div>

      <div class="mb-8">
        <p class="text-xs font-semibold uppercase tracking-[0.2em] mb-2" style="color:var(--gold)">Portal Peserta</p>
        <h1 class="text-3xl font-bold" style="color:var(--dark)">Masuk ke Akun</h1>
        <p class="text-sm mt-2" style="color:var(--muted); font-weight:300">Gunakan username dan password yang terdaftar.</p>
      </div>

      <% if (error) { %>
        <div class="error-box mb-5"><p><%= error %></p></div>
      <% } %>

      <% if (locals.rateLimited) { %>
        <div class="rate-box mb-5">
          <p class="font-semibold mb-1">Terlalu banyak percobaan login</p>
          <p>Coba lagi dalam <span id="countdown" class="font-mono font-bold"></span></p>
        </div>
        <script>
          const resetTime = Number("<%= resetTime %>") * 1000;
          function updateCountdown() {
            const diff = resetTime - Date.now();
            if (diff <= 0) { location.reload(); return; }
            const m = Math.floor(diff / 60000);
            const s = Math.floor((diff % 60000) / 1000).toString().padStart(2, "0");
            document.getElementById("countdown").textContent = `${m}:${s}`;
          }
          updateCountdown();
          setInterval(updateCountdown, 1000);
        </script>
      <% } %>

      <form action="/login" method="POST" class="space-y-4">
        <div>
          <label class="block text-xs font-semibold uppercase tracking-widest mb-2" style="color:var(--muted)">Username</label>
          <input type="text" name="username" placeholder="Masukkan username" required class="form-input">
        </div>
        <div>
          <label class="block text-xs font-semibold uppercase tracking-widest mb-2" style="color:var(--muted)">Password</label>
          <input type="password" name="password" placeholder="••••••••" required class="form-input">
        </div>
        <div class="pt-2">
          <button type="submit" class="btn-primary" <% if (locals.rateLimited) { %>disabled<% } %>>
            Masuk 
          </button>
        </div>
      </form>

      <div class="my-6 ruled-line"></div>

      <p class="text-center text-sm" style="color:var(--muted)">
        Belum punya akun?
        <a href="/register" class="font-semibold hover:underline" style="color:var(--gold)">Daftar sekarang</a>
      </p>
      <p class="text-center text-xs mt-4" style="color:#c4b8a8">
        <a href="/" class="hover:underline">← Kembali ke halaman utama</a>
      </p>

    </div>
  </div>

</body>
</html>
